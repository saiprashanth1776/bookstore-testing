{"ast":null,"code":"\"use strict\";\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar WebSocketConnection_1 = require(\"../realtime/WebSocketConnection\");\n\nvar BrowserPollConnection_1 = require(\"../realtime/BrowserPollConnection\");\n/**\n * INTERNAL methods for internal-use only (tests, etc.).\n *\n * Customers shouldn't use these or else should be aware that they could break at any time.\n *\n * @const\n */\n\n\nexports.forceLongPolling = function () {\n  WebSocketConnection_1.WebSocketConnection.forceDisallow();\n  BrowserPollConnection_1.BrowserPollConnection.forceAllow();\n};\n\nexports.forceWebSockets = function () {\n  BrowserPollConnection_1.BrowserPollConnection.forceDisallow();\n};\n/* Used by App Manager */\n\n\nexports.isWebSocketsAvailable = function () {\n  return WebSocketConnection_1.WebSocketConnection['isAvailable']();\n};\n\nexports.setSecurityDebugCallback = function (ref, callback) {\n  ref.repo.persistentConnection_.securityDebugCallback_ = callback;\n};\n\nexports.stats = function (ref, showDelta) {\n  ref.repo.stats(showDelta);\n};\n\nexports.statsIncrementCounter = function (ref, metric) {\n  ref.repo.statsIncrementCounter(metric);\n};\n\nexports.dataUpdateCount = function (ref) {\n  return ref.repo.dataUpdateCount;\n};\n\nexports.interceptServerData = function (ref, callback) {\n  return ref.repo.interceptServerData_(callback);\n};","map":{"version":3,"sources":["../src/api/internal.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;AAgBA,IAAA,qBAAA,GAAA,OAAA,CAAA,iCAAA,CAAA;;AACA,IAAA,uBAAA,GAAA,OAAA,CAAA,mCAAA,CAAA;AAGA;;;;;;;;;AAQa,OAAA,CAAA,gBAAA,GAAmB,YAAA;AAC9B,EAAA,qBAAA,CAAA,mBAAA,CAAoB,aAApB;AACA,EAAA,uBAAA,CAAA,qBAAA,CAAsB,UAAtB;AACD,CAHY;;AAKA,OAAA,CAAA,eAAA,GAAkB,YAAA;AAC7B,EAAA,uBAAA,CAAA,qBAAA,CAAsB,aAAtB;AACD,CAFY;AAIb;;;AACa,OAAA,CAAA,qBAAA,GAAwB,YAAA;AACnC,SAAO,qBAAA,CAAA,mBAAA,CAAoB,aAApB,GAAP;AACD,CAFY;;AAIA,OAAA,CAAA,wBAAA,GAA2B,UACtC,GADsC,EAEtC,QAFsC,EAET;AAE5B,EAAA,GAAG,CAAC,IAAJ,CAAS,qBAAT,CAAuC,sBAAvC,GAAgE,QAAhE;AACF,CALY;;AAOA,OAAA,CAAA,KAAA,GAAQ,UAAS,GAAT,EAAyB,SAAzB,EAA4C;AAC/D,EAAA,GAAG,CAAC,IAAJ,CAAS,KAAT,CAAe,SAAf;AACD,CAFY;;AAIA,OAAA,CAAA,qBAAA,GAAwB,UAAS,GAAT,EAAyB,MAAzB,EAAuC;AAC1E,EAAA,GAAG,CAAC,IAAJ,CAAS,qBAAT,CAA+B,MAA/B;AACD,CAFY;;AAIA,OAAA,CAAA,eAAA,GAAkB,UAAS,GAAT,EAAuB;AACpD,SAAO,GAAG,CAAC,IAAJ,CAAS,eAAhB;AACD,CAFY;;AAIA,OAAA,CAAA,mBAAA,GAAsB,UACjC,GADiC,EAEjC,QAFiC,EAEa;AAE9C,SAAO,GAAG,CAAC,IAAJ,CAAS,oBAAT,CAA8B,QAA9B,CAAP;AACD,CALY","sourcesContent":["/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { WebSocketConnection } from '../realtime/WebSocketConnection';\nimport { BrowserPollConnection } from '../realtime/BrowserPollConnection';\nimport { Reference } from './Reference';\n\n/**\n * INTERNAL methods for internal-use only (tests, etc.).\n *\n * Customers shouldn't use these or else should be aware that they could break at any time.\n *\n * @const\n */\n\nexport const forceLongPolling = function() {\n  WebSocketConnection.forceDisallow();\n  BrowserPollConnection.forceAllow();\n};\n\nexport const forceWebSockets = function() {\n  BrowserPollConnection.forceDisallow();\n};\n\n/* Used by App Manager */\nexport const isWebSocketsAvailable = function(): boolean {\n  return WebSocketConnection['isAvailable']();\n};\n\nexport const setSecurityDebugCallback = function(\n  ref: Reference,\n  callback: (a: Object) => void\n) {\n  (ref.repo.persistentConnection_ as any).securityDebugCallback_ = callback;\n};\n\nexport const stats = function(ref: Reference, showDelta?: boolean) {\n  ref.repo.stats(showDelta);\n};\n\nexport const statsIncrementCounter = function(ref: Reference, metric: string) {\n  ref.repo.statsIncrementCounter(metric);\n};\n\nexport const dataUpdateCount = function(ref: Reference): number {\n  return ref.repo.dataUpdateCount;\n};\n\nexport const interceptServerData = function(\n  ref: Reference,\n  callback: ((a: string, b: any) => void) | null\n) {\n  return ref.repo.interceptServerData_(callback);\n};\n"]},"metadata":{},"sourceType":"script"}