{"ast":null,"code":"var _jsxFileName = \"D:\\\\react\\\\bookstore\\\\src\\\\components\\\\Books.js\";\nimport React from \"react\";\nimport SearchArea from \"./SearchArea\";\nimport request from \"superagent\";\nimport ListBooks from \"./ListBooks\";\n\nclass Books extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.searchHandle = e => {\n      // console.log(e.target.value)\n      this.setState({\n        searchField: e.target.value\n      });\n    };\n\n    this.bookSearch = e => {\n      e.preventDefault();\n      request.get(\"https://www.googleapis.com/books/v1/volumes\").query({\n        q: this.state.searchField\n      }).then(data => {\n        console.log(data);\n        const cleanData = this.dataCleaning(data);\n        this.setState({\n          books: cleanData\n        });\n      });\n    };\n\n    this.sortHandle = e => {\n      console.log(e.target.value);\n      this.setState({\n        sort: e.target.value\n      });\n    };\n\n    this.dataCleaning = data => {\n      const cleanData = data.body.items.map(book => {\n        if (book.volumeInfo.hasOwnProperty('publishedDate') === false) {\n          book.volumeInfo['publishedDate'] = \"0000\";\n        } else if (book.volumeInfo.hasOwnProperty('imageLinks') === false) {\n          book.volumeInfo['imageLinks'] = {\n            thumbnail: \"https://lh3.googleusercontent.com/proxy/YuMna5FuwMKgyidZph7jluMRFvdpW_fh7kfTWtXX7zDDLTaV7wyP6QEvVTvJ6VogqYcNfkwT18m6yg54NQwJredcz3s_CeNc54a-XD_ceTTgfGm7y2G_1XvppcfojtVo\"\n          };\n        }\n\n        return book;\n      });\n      return cleanData;\n    };\n\n    this.state = {\n      books: [],\n      searchField: '',\n      sort: ''\n    };\n  }\n\n  render() {\n    const booksSorted = this.state.books.sort((a, b) => {\n      if (this.state.sort === \"Newest\") {\n        return parseInt(b.volumeInfo.publishedDate.substring(0, 4)) - parseInt(a.volumeInfo.publishedDate.substring(0, 4));\n      } else if (this.state.sort === \"Oldest\") {\n        return parseInt(a.volumeInfo.publishedDate.substring(0, 4)) - parseInt(b.volumeInfo.publishedDate.substring(0, 4));\n      }\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(SearchArea, {\n      bookSearch: this.bookSearch,\n      sortHandle: this.sortHandle,\n      searchHandle: this.searchHandle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(ListBooks, {\n      books: this.state.books,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 5\n      }\n    }));\n  }\n\n}\n\nexport default Books;","map":{"version":3,"sources":["D:/react/bookstore/src/components/Books.js"],"names":["React","SearchArea","request","ListBooks","Books","Component","constructor","props","searchHandle","e","setState","searchField","target","value","bookSearch","preventDefault","get","query","q","state","then","data","console","log","cleanData","dataCleaning","books","sortHandle","sort","body","items","map","book","volumeInfo","hasOwnProperty","thumbnail","render","booksSorted","a","b","parseInt","publishedDate","substring"],"mappings":"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","sourcesContent":["import React from \"react\"\r\nimport SearchArea from \"./SearchArea\"\r\nimport request from \"superagent\"\r\nimport ListBooks from \"./ListBooks\"\r\n\r\nclass Books extends React.Component{\r\n\tconstructor(props){\r\n\t\t\tsuper(props);\r\n\t\t\tthis.state = {\r\n\t\t\t\tbooks: [],\r\n\t\t\t\tsearchField: '',\r\n\t\t\t\tsort: ''\r\n\t\t\t}\r\n\t};\r\n\r\n\tsearchHandle = (e) => {\r\n\t\t// console.log(e.target.value)\r\n\t\tthis.setState({searchField: e.target.value})\r\n\t}\r\n\r\n\tbookSearch = (e) => {\r\n\t\te.preventDefault()\r\n\r\n\t\trequest.get(\"https://www.googleapis.com/books/v1/volumes\").query({ q:this.state.searchField })\r\n\t\t.then((data) => {\r\n\t\t\tconsole.log(data)\r\n\t\t\tconst cleanData = this.dataCleaning(data)\r\n\t\t\tthis.setState({ books: cleanData }) \r\n\t\t})\r\n\t}\r\n\r\n\tsortHandle = (e) => {\r\n\t\tconsole.log(e.target.value)\r\n\t\tthis.setState({ sort: e.target.value })\r\n\t}\r\n\r\n\tdataCleaning = (data) => {\r\n\t\tconst cleanData = data.body.items.map((book) => {\r\n\t\t\tif(book.volumeInfo.hasOwnProperty('publishedDate') === false){\r\n\t\t\t\tbook.volumeInfo['publishedDate'] = \"0000\";\r\n\t\t\t}\r\n\t\t\telse if(book.volumeInfo.hasOwnProperty('imageLinks') === false){\r\n\t\t\t\tbook.volumeInfo['imageLinks'] = {thumbnail: \"https://lh3.googleusercontent.com/proxy/YuMna5FuwMKgyidZph7jluMRFvdpW_fh7kfTWtXX7zDDLTaV7wyP6QEvVTvJ6VogqYcNfkwT18m6yg54NQwJredcz3s_CeNc54a-XD_ceTTgfGm7y2G_1XvppcfojtVo\"}\r\n\t\t\t}\r\n\r\n\t\t\treturn book\r\n\t\t})\r\n\r\n\t\treturn cleanData\r\n\t}\r\n\r\n\trender(){\r\n\t\tconst booksSorted = this.state.books.sort((a,b) => {\r\n\t\t\tif(this.state.sort === \"Newest\"){\r\n\t\t\t\treturn parseInt(b.volumeInfo.publishedDate.substring(0,4)) - parseInt(a.volumeInfo.publishedDate.substring(0,4))\r\n\t\t\t}\r\n\r\n\t\t\telse if(this.state.sort === \"Oldest\"){\r\n\t\t\t\treturn parseInt(a.volumeInfo.publishedDate.substring(0,4)) - parseInt(b.volumeInfo.publishedDate.substring(0,4))\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn(\r\n\t\t\t<div>\r\n\t\t\t\t<SearchArea bookSearch={this.bookSearch} sortHandle={this.sortHandle} searchHandle={this.searchHandle} />\r\n\t\t\t\t<ListBooks books={this.state.books} />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Books\r\n"]},"metadata":{},"sourceType":"module"}